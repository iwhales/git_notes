# .gitignore

通过在根目录下添加名为 `.gitignore` 文件，可制定忽略规则。文件中每一行对应一条忽略规则。符合忽略规则的文件不会被纳入 Git 的管理，也不会出现在未跟踪文件列表中。但忽略规则只对未跟踪(Untracked)文件有效。如果某个文件已经被 Git 跟踪，那么即便存在与该文件匹配的忽略规则，也不会忽略该文件。

 `.gitignore` 文件的格式规范：

- 所有空行或者以 `＃` 开头的行都会被 Git 忽略。 
- 匹配模式可以以（`/`）开头防止递归。 
- 匹配模式可以以（`/`）结尾指定目录。 
- 模式前加上惊叹号（`!`），表示不会忽略匹配到的文件或目录
- 可以使用标准 glob 模式匹配，会在整个工作树中递归应用
  - 星号（`*`）匹配零个或多个任意字符；。
  - 方括号（`[]`）包含单个字符的匹配列表；如果在方括号中使用短划线分隔两个字符，表示所有在这两个字符范围内的都可以匹配（比如 `[0-9]` 表示匹配所有 0 到 9 的数字）。
  - 问号（`?`）只匹配一个任意字符。
  - 使用两个星号（`**`）表示匹配任意中间目录，比如`a/**/z` 可以匹配 `a/z`, `a/b/z` 或  `a/b/c/z` 等。 

 规则示例：

```
*.cs         # 忽略所有 .cs 结尾的文件
!ABC.cs      # 但会跟踪 ABC.cs，即使存在 *.cs 规则
/TODO        # 仅忽略项目根目录下的 TODO 文件，不包括 subdir/TODO
build/       # 忽略 build/ 目录下的所有文件
doc/*.txt    # 会忽略 doc/notes.txt 但不包括 doc/server/arch.txt
*.[oa]       # []表示包含单个字符的匹配列表,忽略所有以.o或.a结尾的文件
doc/**/*.pdf # 忽略 doc/ 目录下的所有 .pdf 文件
```

忽略文件的基本原则：

1. 忽略操作系统自动生成的文件，比如缩略图等；
2. 忽略编译过程中自动生成的中间文件、可执行文件等，比如Java编译产生的 `.class` 文件；
3. 忽略带有敏感信息的配置文件，比如存放口令的配置文件。

Tips：GitHub 提供了针对不同语言的 `.gitignore` 文件列表——[URL](https://github.com/github/gitignore) 。另外 https://www.gitignore.io/ 也可用于创建忽略规则。

## 忽略已跟踪对象

先从暂存区移除文件文件，使其变为未跟踪(Untracked)状态，然后再次提交即可。
使用 `--cached` 选项，仅将目标对象从暂存区移除，工作区中的该对象会被继续保留。

```bash
# 删除暂存区指定对象，在工作区中继续保留该对象。
$ git rm --cached <path>
```

## 强制添加被忽略对象

如果忽略规则中包含 `.class` 项，但仍然想要添加 `App.class` 文件。在 add 时，可使用 `-f` 来忽略 `.gitignore` 文件。

```bash
# 添加指定文件到暂存区，忽略.gitignore中的规则
$ git add -f <path> ...
```

## 查找忽略规则

```bash
# 查看pathname是否被.gitignore忽略，并输出详细信息
$ git check-ignore -v App.class
.gitignore:3:*.class    App.class
```

## 参考

[Git忽略规则.gitignore梳理](http://www.cnblogs.com/kevingrace/p/5690241.html)

